<div class="section_container">
    <div class="section_title">
      <h1 class="main_title">Usuarios</h1>
    </div>
    <div class="submenu_container">
      <div class="sudmenu_items" [class.select_submenu]="submenu_selected==3" (click)="selectSubmenu(1)">Gestionar Usuarios</div>
    </div>
    

    <div class = "user_container" *ngIf="submenu_selected==1">
    <div class="row row--mb-10">
      <form class="form">
          <div class="col col--flex col--flex-align-center" style="width: 100%;">
              <div class="wrap-search">
                  <input
                      #search_input
                      class="input-search"
                      placeholder="Search by any order parameter..."
                      type="text" />
              </div>
              <div class="wrap-filters">
                  <!-- creation date -->
                  <ng-multiselect-dropdown
                          class="filter"
                          [placeholder]="'Status'"
                          [settings]="dropdownSettings"
                          [data]="admin_status"
                          (onSelect)="getUsersById($event)"
                          (onDeSelect) = "clearStatusInput()"
                          >
                  </ng-multiselect-dropdown>
                  <!-- status -->
              </div>
              <div class = "add_button" (click) = "openDialogAddUser()">
                <span>
                    AÃ‘ADIR
                </span>
                <span class="material-icons-outlined">
                    add_circle_outline
                </span>
            </div>
          </div>
      </form>
  </div>
  
  <div class="page__body">
      <table class="table">
          <thead class="table__thead">
              <tr class="table__tr">
                  <th class="table__th" *ngFor="let title of head_title">
                      <span class="sort-text">
                          {{ title }}
                          <span class="material-icons-outlined">
                              arrow_drop_down
                          </span>
                      </span>
                  </th>
              </tr>
          </thead>
          <div class="table__tbody row--flex row--flex-align-center row--flex-justify-center" *ngIf="is_loading">
              <app-spinner
              width="50"
              height="50"
              color="#0090f3">
          </app-spinner>
          </div>
          <tbody class="table__tbody" *ngIf="is_loading==false">
              <tr class="table__tr table__tr--tbody" (click)="openDialog( i )" *ngFor = "let user of users; let i = index ">
                  <td class="table__td">
                  <span
                  class="text text--bold status">
                      <span>{{ user.user_name }}</span>
                  </span>
                  </td>
                  <td class="table__td">
                    <span> {{ user.email }}</span>
                </td>
                  <td class="table__td">
                      <span *ngIf="user.rfc"> {{ user.rfc }}</span>
                      <span *ngIf="!user.rfc">N/A</span>
                  </td>
                  <td class="table__td">
                      <span *ngIf="user.id_role==1">Administrador</span>
                      <span *ngIf="user.id_role==2">Gestor</span>
                      <span *ngIf="user.id_role==3">Proveedor</span>
                  </td>
                  <td class="table__td">
                      <span
                          class="text text--bold status" 
                          [ngClass]="{
                          'status_orange': user.status ==0,
                          'status_green': user.status ==1
                      }">
                          <span *ngIf="user.status ==0">Bloqueado</span>
                          <span *ngIf="user.status ==1">Activo</span>
                      </span>
                  </td>
              </tr>
          </tbody>
          <tfoot class="table__tfoot">
              <div class="row row--flex row--flex-space-between">
                  <div class="col col--flex col--flex-align-center">
                      <p class="text text--color-gray text--mr-10">
                          ALL
                          <span class="qty-box">
                              {{ total_count }}
                          </span>
                      </p>
                      <select name="" id="" (change)= "changeLimit($event.target.value)">
                          <option value="10" selected>10</option>
                          <option value="20" >20</option>
                          <option value="50">50</option>
                          <option value="100">100</option>
                          <option value="">ALL</option>
                      </select>
                  </div>
                  <div class="col col--flex col--flex-align-center">
                      <div class="col col--flex col--flex-align-center text text--color-gray">
                          <div class="previous" (click)="goPrevious()">
                              <img src="./assets/icons_dashboard/chevron-left.svg" >
                              <span>Previous</span>
                          </div>
                          <input #input_number type="number" min="1" class="actual_page"  [(ngModel)]="page">
                          <span>/</span>
                          <span class="total_pages">{{ total_pages }}</span>
                          <div  class="next" (click)="goNext()"> 
                              <span>Next</span>
                              <img src="./assets/icons_dashboard/chevron-right.svg">
                          </div>
                      </div>
                  </div>
              </div>
          </tfoot>
      </table>
  </div>
    </div>
  
</div>
